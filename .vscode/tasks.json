{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Compile grug.so",
            "command": "gcc",
            "type": "shell",
            "args": [
                "grug/grug.c",
                "-o",
                "grug/grug.so",
                "-shared",
                "-fPIC",
                "-Wall",
                "-Wextra",
                "-Werror",
                "-Wpedantic",
                "-Wfatal-errors",
                "-g",
                "-rdynamic",
                // "-fsanitize=address,undefined",
            ],
            "problemMatcher": [
                "$tsc"
            ],
            "presentation": {
                "reveal": "always",
                "clear": true
            },
            "group": "build"
        },
        {
            "label": "Compile adapter.so",
            "command": "gcc",
            "type": "shell",
            "args": [
                "adapter.c",
                "-o",
                "adapter.so",
                "-shared",
                "-fPIC",
                "-Wall",
                "-Wextra",
                "-Werror",
                "-Wpedantic",
                "-Wfatal-errors",
                "-g",
                // "-fsanitize=address,undefined",
                // Generate the below strings using `python3-config --includes --ldflags`
                // It's explained here: https://www.linuxjournal.com/article/8497
                // "-lpython3.12",
                // "-I/usr/include/python3.12",
                // "-L/usr/lib/python3.12/config-3.12-x86_64-linux-gnu",
                // "-L/usr/lib/x86_64-linux-gnu",
                // "-ldl",
                // "-lm",
                //
                "-lpython3.11",
                "-I/home/trez/.pyenv/versions/3.11.10/include/python3.11",
                "-L/home/trez/.pyenv/versions/3.11.10/lib",
                "-ldl",
                "-L/home/trez/.pyenv/versions/3.11.10/lib",
                "-Wl,-rpath,/home/trez/.pyenv/versions/3.11.10/lib",
                "-lm",
            ],
            "problemMatcher": [
                "$tsc"
            ],
            "presentation": {
                "reveal": "always",
                "clear": true
            },
            "group": "build"
        }
    ]
}
